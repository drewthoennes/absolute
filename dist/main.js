!function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],f=0,p=[];f<s.length;f++)i=s[f],r[i]&&p.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(u&&u(e);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={0:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/public/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;a.push([102,1]),n()}([,,function(t,e){t.exports={SET_INVENTORY:"set_inventory",GET_WOOD:"get_wood",INC_WOOD:"inc_wood",DEC_WOOD:"dec_wood",EN_FURS:"en_furs",INC_FURS:"inc_furs",DEC_FURS:"dec_furs",INC_GOLD:"inc_gold",DEC_GOLD:"dec_gold",EN_FIRE:"enable_fire",EN_TRAPS:"enable_traps",INC_TRAPS:"inc_traps",DEC_TRAPS:"dec_traps",EN_CLAWS:"en_claws",INC_CLAWS:"inc_claws",DEC_CLAWS:"dec_claws",SET_DIALOGUE:"set_dialogue",ADD_LINE:"add_line",DELETE_LINES:"delete_lines",SET_AREAS:"set_areas",UPDATE_DARK_WOODS:"update_dark_woods",UPDATE_STONY_PATH:"update_stony_path",UPDATE_TRADE_POST:"update_trade_post",EN_STONY_PATH:"enable_stony_path",EN_TRADE_POST:"enable_trade_post",SET_PROGRESS:"set_progress",GET_TIME:"get_time"}},,function(t,e){t.exports={delta:500,saveFreq:15e3,log:!1,dark:!1,maxFeedLength:15}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var o=n(75);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"html, body {\n  height: 100%; }\n\n#app {\n  height: 100%; }\n\n#loop-container {\n  height: 95%; }\n\n#bottom-bar-container {\n  height: 5%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  #bottom-bar-container p {\n    margin: 0px; }\n\n.full {\n  height: 100%; }\n",""])},,function(t,e,n){var o=n(78);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#screen {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between; }\n\n.full {\n  height: 100%; }\n",""])},function(t,e,n){var o=n(80);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#feed {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  overflow: hidden; }\n  #feed #lines {\n    width: 80%;\n    margin-top: 16px; }\n    #feed #lines p {\n      margin: 0px;\n      padding-bottom: 10px;\n      -webkit-animation: fadein 1s;\n      -moz-animation: fadein 1s;\n      -ms-animation: fadein 1s;\n      -o-animation: fadein 1s;\n      animation: fadein 1s; }\n",""])},function(t,e,n){var o=n(82);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#inventory {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center; }\n  #inventory #materials {\n    border: 1px solid black;\n    padding: 10px;\n    margin: 16px;\n    width: 150px;\n    height: fit-content; }\n    #inventory #materials .material {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between; }\n    #inventory #materials p {\n      margin: 0px; }\n",""])},function(t,e,n){var o=n(84);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#interface {\n  width: 100%; }\n  #interface .areas {\n    display: flex;\n    flex-direction: row; }\n    #interface .areas .area {\n      padding-left: 10px;\n      padding-right: 10px; }\n    #interface .areas .area:first-child {\n      padding-left: 0px; }\n    #interface .areas .area:last-child {\n      padding-right: 0px; }\n  #interface .area-unselected:hover {\n    cursor: pointer; }\n",""])},function(t,e,n){var o=n(86);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".cooldown-button {\n  position: relative;\n  width: 120px;\n  height: 30px;\n  border: 1px solid black;\n  margin-bottom: 16px; }\n  .cooldown-button .cooldown {\n    height: 100%;\n    background: #cccccc; }\n  .cooldown-button p {\n    position: absolute;\n    width: 100%;\n    text-align: center; }\n  .cooldown-button .cooldown-button-text {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    z-index: 1; }\n    .cooldown-button .cooldown-button-text p {\n      margin: 0px;\n      z-index: 2; }\n\n.cooldown-enabled {\n  cursor: pointer; }\n\n.cooldown-disabled {\n  cursor: default; }\n",""])},function(t,e,n){var o=n(88);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#dark-woods {\n  width: 100%;\n  position: fixed; }\n",""])},function(t,e,n){var o=n(90);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#stony-path {\n  width: 100%; }\n",""])},function(t,e,n){var o=n(92);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#trade-post {\n  width: 100%; }\n",""])},function(t,e,n){var o=n(94);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"#bottom-bar {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-left: 10px;\n  margin-right: 10px; }\n  #bottom-bar p {\n    padding-left: 10px;\n    padding-right: 10px; }\n  #bottom-bar p:first-child {\n    padding-left: 0px; }\n  #bottom-bar p:last-child {\n    padding-right: 0px; }\n  #bottom-bar .bottom-button:hover {\n    cursor: pointer; }\n\n.full {\n  height: 100%; }\n",""])},,,function(t,e,n){var o=n(98);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"",""])},,function(t,e,n){var o=n(101);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,"body {\n  margin: 10px;\n  height: calc(100% - 20px); }\n\n.full {\n  height: 100%; }\n\n/* Part of tooltip CSS from http://jsfiddle.net/AndreaLigios/jtLbpy62/ */\n[tooltip]:not([tooltip-persistent]):before {\n  pointer-events: none; }\n\n.tooltip-top[tooltip]:before {\n  content: attr(tooltip);\n  position: absolute;\n  opacity: 0;\n  padding: 5px;\n  border: 1px solid black;\n  z-index: 2; }\n\n.tooltip-top[tooltip]:hover:before {\n  opacity: 1;\n  background: white;\n  margin-top: -35px;\n  margin-left: -1px;\n  -webkit-animation: fadein 1s;\n  -moz-animation: fadein 0.2s;\n  -ms-animation: fadein 0.2s;\n  -o-animation: fadein 0.2s;\n  animation: fadein 0.2s; }\n\n.no-ingredients[tooltip]:before {\n  content: attr(tooltip);\n  position: absolute;\n  opacity: 0;\n  padding: 5px;\n  border: 1px solid black;\n  z-index: 2;\n  color: red; }\n\n.no-ingredients[tooltip]:hover:before {\n  opacity: 1;\n  background: white;\n  margin-top: 35px;\n  margin-left: -1px;\n  -webkit-animation: fadein 1s;\n  -moz-animation: fadein 0.2s;\n  -ms-animation: fadein 0.2s;\n  -o-animation: fadein 0.2s;\n  animation: fadein 0.2s; }\n\n[tooltip]:before {\n  content: attr(tooltip);\n  position: absolute;\n  opacity: 0;\n  padding: 5px;\n  border: 1px solid black;\n  z-index: 2; }\n\n[tooltip]:hover:before {\n  opacity: 1;\n  background: white;\n  margin-top: 35px;\n  margin-left: -1px;\n  -webkit-animation: fadein 1s;\n  -moz-animation: fadein 0.2s;\n  -ms-animation: fadein 0.2s;\n  -o-animation: fadein 0.2s;\n  animation: fadein 0.2s; }\n\n@keyframes fadein {\n  from {\n    opacity: 0; }\n  to {\n    opacity: 1; } }\n\n/* https://stackoverflow.com/questions/22666063/how-to-fade-the-edge-of-a-div-with-just-css */\n.fade {\n  position: relative;\n  bottom: 4em;\n  height: 4em;\n  background: -webkit-linear-gradient(rgba(255, 255, 255, 0) 0%, white 100%); }\n",""])},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(3),i=n.n(a),s=n(11),l=n(17),c=n.n(l),u=n(104),f=n(107),p=n(106),d=n(105),h=n(12),y=n.n(h),b=(n(74),n(15)),g=n(4),m=n.n(g);function v(t){m.a.log&&console.log(t)}function w(){var t=(new Date).getTime();return Math.floor((t-H.getState().progress.start)/1e3)}function E(t,e){return e<0?t[0]:e>=t.length?t[t.length-1]:t[e]}function S(t){var e="",n=!0;for(var o in t)n?n=!1:e+="; ",e+=o+": ",e+=t[o];return e}function k(t){for(var e in t)return!(H.getState().inventory[e].quantity<t[e])}function O(t){return Math.random()<=t}var _=n(2);function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var x={wood:{quantity:0,visible:!0},fire:{quantity:0,visible:!1,cost:{wood:0},recipe:{wood:[1]}},traps:{quantity:0,visible:!1,cost:{wood:5},recipe:{wood:[10,25,40,70,120]}},furs:{quantity:0,visible:!1},claws:{quantity:0,visible:!1},hides:{quantity:0,visible:!1},daggers:{quantity:0,visible:!1},gold:{quantity:10,visible:!0}},T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialState=e}var e,n,o;return e=t,(n=[{key:"load",value:function(){var t=this;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _.SET_INVENTORY:return n.store;case _.GET_WOOD:return e.wood.quantity;case _.INC_WOOD:return n.val?Object.assign({},e,{wood:{quantity:e.wood.quantity+n.val,visible:e.wood.visible}}):Object.assign({},e,{wood:{quantity:e.wood.quantity+Math.floor(5*Math.random())+3,visible:e.wood.visible}});case _.DEC_WOOD:return n.val?Object.assign({},e,{wood:{quantity:e.wood.quantity-n.val<0?0:e.wood.quantity-n.val,visible:e.wood.visible}}):Object.assign({},e,{wood:{quantity:e.wood.quantity-1<0?0:e.wood.quantity-1,visible:e.wood.visible}});case _.EN_FIRE:return Object.assign({},e,{fire:{quantity:1,visible:!0,cost:{wood:E(e.fire.recipe.wood,e.fire.quantity)},recipe:e.fire.recipe}});case _.EN_TRAPS:return Object.assign({},e,{traps:{quantity:e.traps.quantity,visible:!0,cost:{wood:E(e.traps.recipe.wood,e.traps.quantity)},recipe:e.traps.recipe}});case _.INC_TRAPS:return n.val?Object.assign({},e,{traps:{quantity:e.traps.quantity+n.val,visible:e.traps.visible,cost:{wood:E(e.traps.recipe.wood,e.traps.quantity+1)},recipe:e.traps.recipe}}):Object.assign({},e,{traps:{quantity:e.traps.quantity+1,visible:e.traps.visible,cost:{wood:E(e.traps.recipe.wood,e.traps.quantity+1)},recipe:e.traps.recipe}});case _.DEC_TRAPS:return n.val?Object.assign({},e,{traps:{quantity:e.traps.quantity-n.val<0?0:e.traps.quantity-n.val,visible:e.traps.visible,cost:{wood:E(e.traps.recipe.wood,e.traps.quantity-1)},recipe:e.traps.recipe}}):Object.assign({},e,{traps:{quantity:e.traps.quantity-1<0?0:e.traps.quantity-1,visible:e.traps.visible,cost:{wood:E(e.traps.recipe.wood,e.traps.quantity-1)},recipe:e.traps.recipe}});case _.EN_FURS:return Object.assign({},e,{furs:{quantity:e.furs.quantity,visible:!0}});case _.INC_FURS:return n.val?Object.assign({},e,{furs:{quantity:e.furs.quantity+n.val,visible:e.furs.visible}}):Object.assign({},e,{furs:{quantity:e.furs.quantity+e.traps.quantity*(Math.floor(5*Math.random())+3),visible:e.furs.visible}});case _.DEC_FURS:return n.val?Object.assign({},e,{furs:{quantity:e.furs.quantity-n.val<0?0:e.furs.quantity-n.val,visible:e.furs.visible}}):Object.assign({},e,{furs:{quantity:e.furs.quantity-1<0?0:e.furs.quantity-1,visible:e.furs.visible}});case _.EN_CLAWS:return Object.assign({},e,{claws:{quantity:e.claws.quantity,visible:!0}});case _.INC_CLAWS:return n.val?Object.assign({},e,{claws:{quantity:e.claws.quantity+n.val,visible:e.claws.visible}}):Object.assign({},e,{claws:{quantity:e.claws.quantity+e.traps.quantity*(Math.floor(5*Math.random())+3),visible:e.claws.visible}});case _.DEC_CLAWS:return n.val?Object.assign({},e,{claws:{quantity:e.claws.quantity-n.val<0?0:e.claws.quantity-n.val,visible:e.claws.visible}}):Object.assign({},e,{claws:{quantity:e.claws.quantity-1<0?0:e.claws.quantity-1,visible:e.claws.visible}});case _.INC_GOLD:return n.val?Object.assign({},e,{gold:{quantity:e.gold.quantity+n.val,visible:!0}}):Object.assign({},e,{gold:{quantity:e.gold.quantity+Math.floor(5*Math.random())+3,visible:!0}});case _.DEC_GOLD:return n.val?Object.assign({},e,{gold:{quantity:e.gold.quantity-n.val<0?0:e.gold.quantity-n.val,visible:e.gold.visible}}):Object.assign({},e,{gold:{quantity:e.gold.quantity-1<0?0:e.gold.quantity-1,visible:e.gold.visible}});default:return e}}}}])&&P(e.prototype,n),o&&P(e,o),t}();function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var C={start:(new Date).getTime()},q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialState=e}var e,n,o;return e=t,(n=[{key:"load",value:function(){var t=this;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,n=arguments.length>1?arguments[1]:void 0,o=(new Date).getTime();switch(n.type){case _.SET_PROGRESS:return n.store.start=o-(n.store.end-n.store.end),n.store;case _.GET_TIME:return e.start-o;default:return e}}}}])&&j(e.prototype,n),o&&j(e,o),t}();function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var L={lines:{0:["The darkness of the forrest envelops you."],5:["You are surrounded by an open clearing."],120:["A strange figure approaches through the shadows."],123:["Says it expects payment for what you've taken as it slips back into the darkness."]},completed:[]},R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialState=e}var e,n,o;return e=t,(n=[{key:"load",value:function(){var t=this;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _.SET_DIALOGUE:return n.store;case _.ADD_LINE:var o=Object.assign({},e,{});if(o.lines[n.time])o.lines[n.time].push(n.line);else{var r=[];r.push(n.line),o.lines[n.time]=r}return o;case _.DELETE_LINES:return delete e.lines[n.time],e;default:return e}}}}])&&D(e.prototype,n),o&&D(e,o),t}();function I(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var A,B,N={darkWoods:{enabled:!0,state:{},time:""},stonyPath:{enabled:!1,state:{},time:""},abandonedMine:{enabled:!1,state:{},time:""},tradePost:{enabled:!1,state:{},time:""}},M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialState=e}var e,n,o;return e=t,(n=[{key:"load",value:function(){var t=this;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.initialState,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _.SET_AREAS:return n.store;case _.UPDATE_DARK_WOODS:return Object.assign({},e,{darkWoods:{enabled:e.darkWoods.enabled,state:n.data,time:(new Date).getTime()}});case _.EN_STONY_PATH:return Object.assign({},e,{stonyPath:{enabled:!0,state:e.stonyPath.state,time:e.stonyPath.time}});case _.UPDATE_STONY_PATH:return Object.assign({},e,{stonyPath:{enabled:e.stonyPath.enabled,state:n.data,time:(new Date).getTime()}});case _.EN_TRADE_POST:return Object.assign({},e,{tradePost:{enabled:!0,state:e.tradePost.state,time:e.tradePost.time}});case _.UPDATE_TRADE_POST:return Object.assign({},e,{tradePost:{enabled:e.tradePost.enabled,state:n.data,time:(new Date).getTime()}});default:return e}}}}])&&I(e.prototype,n),o&&I(e,o),t}(),W=((B=JSON.parse(localStorage.getItem("gameState")))&&B.progress&&B.progress.stop&&delete B.progress.stop,JSON.parse(localStorage.getItem("gameState")));W&&(A=W);var F,U=new T(A?A.inventory:void 0),z=new R(A?A.dialogue:void 0),K=new M(A?A.areas:void 0),G=new q(A?A.progress:void 0),Y=Object(b.b)({inventory:U.load(),progress:G.load(),dialogue:z.load(),areas:K.load()}),H=Object(b.c)(Y),J=function(t){return{type:_.SET_INVENTORY,store:t}},V=function(t){return{type:_.DEC_WOOD,val:t}},Q=function(t){return{type:_.INC_GOLD,val:t}},X=function(t){return{type:_.SET_DIALOGUE,store:t}},Z=function(t,e){return{type:_.ADD_LINE,line:t,time:e}},$=function(t){return{type:_.SET_AREAS,store:t}},tt=function(){return{type:_.EN_STONY_PATH}},et=function(t){return{type:_.SET_PROGRESS,store:t}};n(77),n(79);function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot=(nt(F={fireEnable:{req:{wood:15},action:function(){H.dispatch(Z("Wood can be used to start a fire to attract others.",w())),H.dispatch({type:_.EN_FIRE})}},trapsEnable:{req:{wood:30},action:function(){H.dispatch(Z("Traps can catch what you cannot.",w())),H.dispatch({type:_.EN_TRAPS})}},stonyPathEnable:{req:{traps:1},action:function(){H.dispatch(Z("You discover a small path not far from the clearing.",w())),H.dispatch(tt())}}},"stonyPathEnable",{req:{traps:1},action:function(){H.dispatch(Z("You discover a small path not far from the clearing.",w())),H.dispatch(tt())}}),nt(F,"tradePostEnable",{req:{fire:1,wood:20},action:function(){H.dispatch(Z("You discover a small path not far from the clearing.",w())),H.dispatch({type:_.EN_TRADE_POST})}}),nt(F,"demandPayment",{req:{getTimeElapsed:30},interval:{time:300},action:function(){console.log("demanding");var t=Math.floor(w()/150+10);console.log(t),H.dispatch(Z("Twightlight is falling.",w()));var e=Math.floor(3*Math.random());0==e?H.dispatch(Z("A chill runs down your spine.",w()+10)):1==e?H.dispatch(Z("Your fingers start to go numb.",w()+14)):2==e&&H.dispatch(Z("You hear the bleating of lambs in the distance.",w()+6)),H.dispatch(Z("The strange figure approaches.",w()+30)),H.dispatch(Z("It demands payment.",w()+33)),H.dispatch(Z(t+" gold will do, for now...",w()+36))}}),nt(F,"takePayment",{interval:{time:300},action:function(){console.log("taking");var t,e=Math.floor((w()-39)/150+10);console.log("take "+e),H.getState().inventory.gold.quantity>=e?H.dispatch((t=e,{type:_.DEC_GOLD,val:t})):console.log("you die")}}),F);function rt(t,e){for(var n in e)if(t[n].quantity<e[n])return!1;return!0}function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ut=0,ft=!1,pt=function(t){function e(t){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=st(e).call(this,t))||"object"!==at(r)&&"function"!=typeof r?ct(o):r).printLines=n.printLines.bind(ct(ct(n))),n.state={lines:[]},n.getOldLines(),n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(e,r.a.Component),n=e,(o=[{key:"tick",value:function(){var t,e;e=H.getState().inventory,!ot.fireEnable.done&&rt(e,ot.fireEnable.req)&&(ot.fireEnable.action(),ot.fireEnable.done=!0),!ot.trapsEnable.done&&rt(e,ot.trapsEnable.req)&&(ot.trapsEnable.action(),ot.trapsEnable.done=!0),!ot.stonyPathEnable.done&&rt(e,ot.stonyPathEnable.req)&&(ot.stonyPathEnable.action(),ot.stonyPathEnable.done=!0),!ot.tradePostEnable.done&&rt(e,ot.tradePostEnable.req)&&(ot.tradePostEnable.action(),ot.tradePostEnable.done=!0),t||(t=-1),w()%ot.demandPayment.interval.time!=ot.demandPayment.interval.time-40||ot.demandPayment.done?t!=w()&&(ot.demandPayment.done=!1):(ot.demandPayment.action(),ot.demandPayment.done=!0,t=w(),ot.demandPayment.done=!0),w()%ot.takePayment.interval.time!=ot.takePayment.interval.time-1||ot.takePayment.done?t!=w()&&(ot.takePayment.done=!1):(ot.takePayment.action(),ot.takePayment.done=!0,t=w(),ot.takePayment.done=!0),this.printLines()}},{key:"getLines",value:function(t){return H.getState().dialogue.lines[t]}},{key:"printLines",value:function(){var t=w();if(t>ut)ut=t,ft=!0;else if(t==ut&&ft)return;var e=this.getLines(t);if(e){var n=this.state.lines.reverse().concat(e).reverse();n.length>m.a.maxFeedLength&&(n=n.slice(0,m.a.maxFeedLength)),this.setState({lines:n})}}},{key:"getOldLines",value:function(){var t=H.getState().dialogue.lines,e=w();if(0!=e){var n=[],o=[];for(var r in t){if(r>e)break;t[r].forEach(function(t){n.push(t)}),o.push(r)}ut=e,ft=!0,n.length>m.a.maxFeedLength&&(n=n.slice(0,m.a.maxFeedLength)),this.state.lines=n.reverse()}}},{key:"render",value:function(){var t,e=0,n=this.state.lines.map(function(t){return r.a.createElement("p",{key:t+"-"+e++},t)});return t=m.a.maxFeedLength==this.state.lines.length?r.a.createElement("div",{className:"fade"}):"",r.a.createElement("div",{id:"feed"},r.a.createElement("div",{id:"lines"},n,t))}}])&&it(n.prototype,o),a&&it(n,a),e}();n(81);function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function yt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yt(this,bt(e).call(this,t))).state={items:["wood","furs","claws","hides","traps","daggers","gold"]},n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(e,r.a.Component),n=e,(o=[{key:"render",value:function(){var t=this,e=this.state.items.filter(function(e){return!!t.props[e]&&t.props[e].visible}).map(function(e){return r.a.createElement("div",{key:e,className:"material"},r.a.createElement("p",null,e,":"),r.a.createElement("p",null,t.props[e].quantity))});return r.a.createElement("div",{id:"inventory"},r.a.createElement("div",{id:"materials"},e))}}])&&ht(n.prototype,o),a&&ht(n,a),e}(),vt=Object(s.b)(function(t){return{wood:t.inventory.wood,furs:t.inventory.furs,claws:t.inventory.claws,hides:t.inventory.hides,traps:t.inventory.traps,daggers:t.inventory.daggers,gold:t.inventory.gold}})(mt);n(83),n(85);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _t=function(t){function e(t){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=St(e).call(this,t))||"object"!==wt(r)&&"function"!=typeof r?Ot(o):r).cooldownClicked=n.cooldownClicked.bind(Ot(Ot(n))),n.state={initial:1,remaining:0,decrementing:!1,width:0,buttonClass:"cooldown-enabled"},n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,r.a.Component),n=e,(o=[{key:"componentDidMount",value:function(){v("CooldownButton mounted")}},{key:"tick",value:function(){return v("CooldownButton tick"),this.state.decrementing&&(this.setState({remaining:this.state.remaining-m.a.delta,width:(this.state.remaining-m.a.delta)/this.state.initial*100}),this.state.remaining<=0&&this.setState({initial:1,remaining:0,width:0,decrementing:!1,buttonClass:"cooldown-enabled"})),this.state}},{key:"init",value:function(t,e){var n=(new Date).getTime()-e;v("Duration was "+n),t.remaining-=n,t<=0?this.setState({initial:t.initial,remaining:0,width:0,decrementing:!1,buttonClass:"cooldown-enabled"}):this.setState({initial:t.initial,remaining:t.remaining,width:0,decrementing:t.decrementing,buttonClass:"cooldown-disabled"})}},{key:"startCooldown",value:function(t){v("CooldownButton startCooldown"),this.setState({initial:t,remaining:t,width:100,decrementing:!0,buttonClass:"cooldown-disabled"})}},{key:"cooldownClicked",value:function(){!this.state.decrementing&&this.props.enabled&&(this.startCooldown(this.props.cooldown),this.props.cb())}},{key:"render",value:function(){var t=this,e=this.state.buttonClass;this.props.enabled||(e="cooldown-disabled");var n=this.props.enabled?"has-ingredients":"no-ingredients";return r.a.createElement("div",{tooltip:""==this.props.tooltip?void 0:this.props.tooltip,className:"cooldown-button "+e+" "+n,onClick:function(){return t.cooldownClicked()}},r.a.createElement("div",{className:"cooldown-button-text"},r.a.createElement("p",null,this.props.text)),r.a.createElement("div",{className:"cooldown",style:{width:this.state.width+"%"}}))}}])&&Et(n.prototype,o),a&&Et(n,a),e}();_t.defaultProps={text:"Sample text",tooltip:void 0,cooldown:5e3,enabled:!0,cb:function(){v("Error: CooldownButton does not have a callback")}};n(87);function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var qt=function(t){function e(t){var n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(a=Tt(e).call(this,t))||"object"!==Pt(a)&&"function"!=typeof a?Ct(o):a).gatherWoodButton=r.a.createRef(),n.stoakFireButton=r.a.createRef(),n.makeTrapButton=r.a.createRef(),n.init=n.init.bind(Ct(Ct(n))),n.makeTrap=n.makeTrap.bind(Ct(Ct(n))),n.state={area:"Dark Woods"},n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(e,r.a.Component),n=e,(o=[{key:"componentDidMount",value:function(){v("DarkWoods mounted")}},{key:"tick",value:function(){return{gatherWoodButton:this.gatherWoodButton.current.tick(),stoakFireButton:this.stoakFireButton.current?this.stoakFireButton.current.tick():void 0,makeTrapButton:this.makeTrapButton.current?this.makeTrapButton.current.tick():void 0}}},{key:"init",value:function(t){0!=Object.keys(t.state).length&&(this.gatherWoodButton.current.init(t.state.gatherWoodButton,t.time),this.stoakFireButton.current&&this.stoakFireButton.current.init(t.state.stoakFireButton,t.time),this.makeTrapButton.current&&this.makeTrapButton.current.init(t.state.makeTrapButton,t.time))}},{key:"gatherWood",value:function(){var t;H.dispatch({type:_.INC_WOOD,val:t}),O(.2)&&H.dispatch(Z("Random sticks and twigs cover the dimly lit forrest floor.",w()+1))}},{key:"stoakFire",value:function(){H.dispatch(V())}},{key:"makeTrap",value:function(){var t;H.dispatch({type:_.INC_TRAPS,val:t}),H.dispatch(V(this.props.inventory.traps.cost.wood))}},{key:"render",value:function(){var t,e=r.a.createElement(_t,{ref:this.gatherWoodButton,cooldown:"10000",text:"Gather wood",cb:this.gatherWood}),n=this.props.inventory.fire;t=n.visible?r.a.createElement(_t,{ref:this.stoakFireButton,cooldown:"8000",text:"Stoak fire",tooltip:S(n.cost),enabled:k(n.cost),cb:this.stoakFire}):"";var o,a=this.props.inventory.traps;if(a.visible){var i=k(a.cost);o=r.a.createElement(_t,{ref:this.makeTrapButton,cooldown:"8000",text:"Build trap",tooltip:S(a.cost),enabled:i,cb:this.makeTrap})}else o="";return r.a.createElement("div",{id:"dark-woods"},e,t,o)}}])&&xt(n.prototype,o),a&&xt(n,a),e}(),Dt=Object(s.b)(function(t){return{inventory:t.inventory}},null,null,{forwardRef:!0})(qt);n(89);function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Nt=function(t){function e(t){var n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(a=It(e).call(this,t))||"object"!==Lt(a)&&"function"!=typeof a?Bt(o):a).checkTrapsButton=r.a.createRef(),n.init=n.init.bind(Bt(Bt(n))),n.state={},n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(e,r.a.Component),n=e,(o=[{key:"tick",value:function(){return{checkTrapsButton:this.checkTrapsButton.current?this.checkTrapsButton.current.tick():void 0}}},{key:"init",value:function(t){t.time&&this.checkTrapsButton.current&&t.state.checkTrapsButton&&this.checkTrapsButton.current.init(t.state.checkTrapsButton,t.time)}},{key:"checkTraps",value:function(){if(O(.1)){var t=H.getState().inventory.traps.quantity;return H.dispatch((e=1+Math.floor(Math.random()*t),{type:_.DEC_TRAPS,val:e})),void H.dispatch(Z("The traps have been torn to pieces by something.",w()+1))}var e;H.getState().inventory.furs.visible&&H.getState().inventory.claws.visible||(H.dispatch({type:_.EN_FURS}),H.dispatch({type:_.EN_CLAWS})),H.dispatch(function(t){return{type:_.INC_FURS,val:t}}()),H.dispatch(function(t){return{type:_.INC_CLAWS,val:t}}()),O(.3)&&H.dispatch(Z("You gather small bits of fur and claws to use later.",w()+1))}},{key:"render",value:function(){var t,e=this.props.inventory.traps;return t=e.visible?r.a.createElement(_t,{ref:this.checkTrapsButton,cooldown:"20000",text:"Check traps",enabled:e.quantity>0,cb:this.checkTraps}):"",r.a.createElement("div",{id:"stony-path"},t)}}])&&Rt(n.prototype,o),a&&Rt(n,a),e}(),Mt=Object(s.b)(function(t){return{inventory:t.inventory}},null,null,{forwardRef:!0})(Nt);n(91);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Gt=function(t){function e(t){var n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(a=Ut(e).call(this,t))||"object"!==Wt(a)&&"function"!=typeof a?Kt(o):a).sellWoodButton=r.a.createRef(),n.sellFursButton=r.a.createRef(),n.sellClawsButton=r.a.createRef(),n.init=n.init.bind(Kt(Kt(n))),n.state={},n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(e,r.a.Component),n=e,(o=[{key:"tick",value:function(){return{sellWoodButton:this.sellWoodButton.current?this.sellWoodButton.current.tick():void 0,sellFursButton:this.sellFursButton.current?this.sellFursButton.current.tick():void 0,sellClawsButton:this.sellClawsButton.current?this.sellClawsButton.current.tick():void 0}}},{key:"init",value:function(t){t.time&&(this.sellWoodButton.current.init(t.state.sellWoodButton,t.time),this.sellFursButton.current.init(t.state.sellFursButton,t.time),this.sellClawsButton.current.init(t.state.sellClawsButton,t.time))}},{key:"sellWood",value:function(){H.getState().inventory.wood.quantity>=12&&(H.dispatch(Q(1)),H.dispatch(V(12)))}},{key:"sellFurs",value:function(){var t;H.getState().inventory.furs.quantity>=4&&(H.dispatch(Q(1)),H.dispatch((t=4,{type:_.DEC_FURS,val:t})))}},{key:"sellClaws",value:function(){var t;H.getState().inventory.claws.quantity>=6&&(H.dispatch(Q(1)),H.dispatch((t=6,{type:_.DEC_CLAWS,val:t})))}},{key:"render",value:function(){var t,e,n;return t=this.props.inventory.wood.visible?r.a.createElement(_t,{ref:this.sellWoodButton,cooldown:"2000",tooltip:"12 wood",enabled:H.getState().inventory.wood.quantity>=12,text:"Sell Wood",cb:this.sellWood}):"",e=this.props.inventory.furs.visible?r.a.createElement(_t,{ref:this.sellFursButton,cooldown:"2000",tooltip:"4 furs",enabled:H.getState().inventory.furs.quantity>=4,text:"Sell Furs",cb:this.sellFurs}):"",n=this.props.inventory.claws.visible?r.a.createElement(_t,{ref:this.sellClawsButton,cooldown:"2000",tooltip:"6 claws",enabled:H.getState().inventory.claws.quantity>=6,text:"Sell Claws",cb:this.sellClaws}):"",r.a.createElement("div",{id:"trade-post"},t,e,n)}}])&&Ft(n.prototype,o),a&&Ft(n,a),e}(),Yt=Object(s.b)(function(t){return{inventory:t.inventory}},null,null,{forwardRef:!0})(Gt);function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vt(this,Qt(e).call(this,t))).darkWoods=r.a.createRef(),n.stonyPath=r.a.createRef(),n.tradePost=r.a.createRef(),n.state={areas:["Dark Woods","Stony Path","Abandoned Mine","Trading Post"],area:"Dark Woods",data:{}},n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,r.a.Component),n=e,(o=[{key:"componentDidMount",value:function(){v("Interface mounted")}},{key:"tick",value:function(){switch(v("Interface tick"),this.state.area){case"Dark Woods":this.setState({data:this.darkWoods.current.tick()});break;case"Stony Path":this.setState({data:this.stonyPath.current.tick()});break;case"Trading Post":console.log("Updating Trading post"),this.setState({data:this.tradePost.current.tick()});break;default:v("Interface: No area to tick")}}},{key:"setArea",value:function(t){var e,n=this;"Dark Woods"==this.state.area?H.dispatch((e=this.state.data,{type:_.UPDATE_DARK_WOODS,data:e})):"Stony Path"==this.state.area?H.dispatch(function(t){return{type:_.UPDATE_STONY_PATH,data:t}}(this.state.data)):"Abandoned Mine"==this.state.area||"Trading Post"==this.state.areas&&H.dispatch(updateTradePost(this.state.data)),this.setState({area:t},function(){"Dark Woods"==n.state.area?n.darkWoods.current.init(H.getState().areas.darkWoods):"Stony Path"==n.state.area?n.stonyPath.current.init(H.getState().areas.stonyPath):"Abandoned Mine"==n.state.area||"Trading Post"==n.state.areas&&n.tradePost.current.init(H.getState().areas.tradePost)})}},{key:"render",value:function(){var t,e=this,n=[],o=H.getState().areas;return o.darkWoods.enabled&&n.push("Dark Woods"),o.stonyPath.enabled&&n.push("Stony Path"),o.abandonedMine.enabled&&n.push("Abandoned Mine"),o.tradePost.enabled&&n.push("Trading Post"),n=n.map(function(t){return t===e.state.area?r.a.createElement("p",{className:"area area-selected",key:t},r.a.createElement("u",null,t)):r.a.createElement("p",{className:"area area-unselected",onClick:function(){return e.setArea(t)},key:t},t)}),"Dark Woods"===this.state.area?t=r.a.createElement(Dt,{ref:this.darkWoods}):"Stony Path"===this.state.area?t=r.a.createElement(Mt,{ref:this.stonyPath}):"Abandoned Mine"===this.state.area?t="":"Trading Post"===this.state.area&&(t=r.a.createElement(Yt,{ref:this.tradePost})),r.a.createElement("div",{id:"interface"},r.a.createElement("div",{className:"areas"},n),t)}}])&&Jt(n.prototype,o),a&&Jt(n,a),e}();function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var re=m.a.saveFreq,ae=function(t){function e(t){var n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(a=ee(e).call(this,t))||"object"!==$t(a)&&"function"!=typeof a?oe(o):a).interface=r.a.createRef(),n.feed=r.a.createRef(),n.state={running:!0,delta:m.a.delta,loggedIn:!1},n.handleLogin=n.handleLogin.bind(oe(oe(n))),n.handleLogout=n.handleLogout.bind(oe(oe(n))),n.tick=n.tick.bind(oe(oe(n))),n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(e,r.a.Component),n=e,(o=[{key:"componentDidMount",value:function(){setInterval(this.tick,this.state.delta)}},{key:"handleLogin",value:function(){this.setState({loggedIn:!0})}},{key:"handleLogout",value:function(){this.setState({loggedIn:!1})}},{key:"tick",value:function(){this.state.running&&(v("Tick"),this.interface.current.tick(),this.feed.current.tick()),(re-=m.a.delta)<=0&&(!function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("Saving game state ("+t+")");var e=H.getState();if(e.progress.stop=(new Date).getTime(),e.dialogue.completed=[],t){var n=localStorage.getItem("token");y.a.post("/api/game",{game:e},{headers:{Authorization:"Bearer "+n}}).then(function(t){})}else localStorage.setItem("gameState",JSON.stringify(e))}(this.state.loggedIn),re=m.a.saveFreq)}},{key:"render",value:function(){return r.a.createElement("div",{id:"screen",className:"full"},r.a.createElement(pt,{ref:this.feed}),r.a.createElement(Zt,{ref:this.interface}),r.a.createElement(vt,null))}}])&&te(n.prototype,o),a&&te(n,a),e}();n(93);function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var fe=function(t){function e(t){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=le(e).call(this,t))||"object"!==ie(r)&&"function"!=typeof r?ue(o):r).state={loggedIn:!1},localStorage.getItem("token")&&(n.state.loggedIn=!0),n.handleLogin=n.handleLogin.bind(ue(ue(n))),n.handleLogout=n.handleLogout.bind(ue(ue(n))),n.openLoginModal=n.openLoginModal.bind(ue(ue(n))),n}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(e,r.a.Component),n=e,(o=[{key:"openLoginModal",value:function(){this.props.openLoginModal()}},{key:"handleLogin",value:function(){this.setState({loggedIn:!0})}},{key:"handleLogout",value:function(){this.setState({loggedIn:!1}),localStorage.removeItem("token"),localStorage.removeItem("gameState"),localStorage.removeItem("username"),window.location.reload()}},{key:"render",value:function(){var t;if(this.state.loggedIn){var e=localStorage.getItem("username");t=r.a.createElement("p",{className:"bottom-button tooltip-top",tooltip:e,onClick:this.handleLogout},"Log out")}else t=r.a.createElement("p",{className:"bottom-button",onClick:this.openLoginModal},"Log in");return r.a.createElement("div",{id:"bottom-bar"},t)}}])&&se(n.prototype,o),a&&se(n,a),e}(),pe=n(36),de=n(37);n(97);function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ve=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(o=be(e).call(this))||"object"!==he(o)&&"function"!=typeof o?me(n):o).state={showModal:!1,login:!0,loginError:"",registerError:"",styles:{modal:{content:{top:"50%",left:"50%",width:"50%",height:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column"}},close:{float:"right"},login:{fields:{height:"80%",display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"20%",marginRight:"20%",paddingBottom:"10%"},title:{textAlign:"center"},username:{padding:"10px",marginBottom:"5px",fontSize:"12px"},password:{padding:"10px",marginTop:"5px",marginBottom:"5px",fontSize:"12px"},error:{color:"red",margin:"0px",textAlign:"center",fontSize:"14px"},login:{marginTop:"5px",backgroundColor:"#cccccc",border:"1px solid #b2b2b2",padding:"10px",color:"white"}},register:{fields:{height:"80%",display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"20%",marginRight:"20%",paddingBottom:"10%"},title:{textAlign:"center"},email:{padding:"10px",marginBottom:"5px",fontSize:"12px"},username:{padding:"10px",marginBottom:"5px",fontSize:"12px"},password:{padding:"10px",marginTop:"5px",marginBottom:"5px",fontSize:"12px"},error:{color:"red",margin:"0px",textAlign:"center",fontSize:"14px"},register:{marginTop:"5px",backgroundColor:"#cccccc",border:"1px solid #b2b2b2",padding:"10px",color:"white"}},toggle:{margin:"0px",textAlign:"center"}}},t.loginUsername=r.a.createRef(),t.loginPassword=r.a.createRef(),t.registerEmail=r.a.createRef(),t.registerUsername=r.a.createRef(),t.registerPassword=r.a.createRef(),t.handleOpenModal=t.handleOpenModal.bind(me(me(t))),t.handleCloseModal=t.handleCloseModal.bind(me(me(t))),t.handleKeyDownLogin=t.handleKeyDownLogin.bind(me(me(t))),t.handleKeyDownRegister=t.handleKeyDownRegister.bind(me(me(t))),t.login=t.login.bind(me(me(t))),t.register=t.register.bind(me(me(t))),t}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,r.a.Component),n=e,(o=[{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}},{key:"handleKeyDownLogin",value:function(t){"Enter"===t.key&&this.login()}},{key:"handleKeyDownRegister",value:function(t){"Enter"===t.key&&this.register()}},{key:"login",value:function(){var t=this,e=this.loginUsername.current.value,n=this.loginPassword.current.value;y.a.post("/api/auth/login",{username:e,password:n}).then(function(e){if(e.data)if(e.data.error)t.setState({loginError:e.data.error});else if(e.data.token){var n=e.data.token,o=e.data.username;y.a.get("/api/game",{headers:{Authorization:"Bearer "+e.data.token}}).then(function(e){if(e.data.game&&e.data.game.inventory){var r=[];r.push(new Promise(function(t,n){H.dispatch($(e.data.game.areas))})),r.push(new Promise(function(t,n){H.dispatch(X(e.data.game.dialogue))})),r.push(new Promise(function(t,n){H.dispatch(J(e.data.game.inventory))})),r.push(new Promise(function(t,n){H.dispatch(et(e.data.game.progress))})),Promise.all(r),localStorage.setItem("token",n),localStorage.setItem("username",o),t.props.handleLogin(),t.handleCloseModal(),t.setState({loginError:""})}else localStorage.setItem("token",n),localStorage.setItem("username",o),t.props.handleLogin(),t.handleCloseModal(),t.setState({loginError:""})})}else t.setState({loginError:"Invalid server response"});else t.setState({loginError:"There was a problem servicing the request"})})}},{key:"register",value:function(){var t=this,e=this.registerEmail.current.value,n=this.registerUsername.current.value,o=this.registerPassword.current.value;y.a.post("/api/auth/register",{email:e,username:n,password:o}).then(function(e){e.data?e.data.error?t.setState({registerError:e.data.error}):t.setState({login:!0,registerError:""}):t.setState({registerError:"There was a problem servicing the request"})})}},{key:"render",value:function(){var t,e,n=this,o=r.a.createElement("p",{style:this.state.styles.login.error},this.state.loginError),a=r.a.createElement("p",{style:this.state.styles.register.error},this.state.registerError);return t=this.state.login?r.a.createElement("div",{style:this.state.styles.login.fields},r.a.createElement("h2",{style:this.state.styles.login.title},"Log In"),r.a.createElement("input",{type:"text",placeholder:"Username",style:this.state.styles.login.username,ref:this.loginUsername,onKeyDown:this.handleKeyDownLogin}),r.a.createElement("input",{type:"password",placeholder:"Password",style:this.state.styles.login.password,ref:this.loginPassword,onKeyDown:this.handleKeyDownLogin}),o,r.a.createElement("button",{onClick:this.login,style:this.state.styles.login.login},"Log in")):r.a.createElement("div",{style:this.state.styles.register.fields},r.a.createElement("h2",{style:this.state.styles.register.title},"Register"),r.a.createElement("input",{type:"text",placeholder:"Email",style:this.state.styles.register.email,ref:this.registerEmail,onKeyDown:this.handleKeyDownRegister}),r.a.createElement("input",{type:"text",placeholder:"Username",style:this.state.styles.register.username,ref:this.registerUsername,onKeyDown:this.handleKeyDownRegister}),r.a.createElement("input",{type:"password",placeholder:"Password",style:this.state.styles.register.password,ref:this.registerPassword,onKeyDown:this.handleKeyDownRegister}),a,r.a.createElement("button",{onClick:this.register,style:this.state.styles.register.register},"Register")),e=this.state.login?r.a.createElement("p",{style:this.state.styles.toggle,onClick:function(){return n.setState({login:!1})}},"Don't have an account? Register here."):r.a.createElement("p",{style:this.state.styles.toggle,onClick:function(){return n.setState({login:!0})}},"Already have an account? Log in here."),r.a.createElement("div",null,r.a.createElement(c.a,{isOpen:this.state.showModal,contentLabel:"Minimal Modal Example",style:this.state.styles.modal},r.a.createElement(pe.a,{icon:de.a,onClick:this.handleCloseModal,style:this.state.styles.close}),t,e))}}])&&ye(n.prototype,o),a&&ye(n,a),e}();function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Se(t){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _e=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(o=Se(e).call(this))||"object"!==we(o)&&"function"!=typeof o?Oe(n):o).openLoginModal=t.openLoginModal.bind(Oe(Oe(t))),t.handleLogin=t.handleLogin.bind(Oe(Oe(t))),t.handleLogout=t.handleLogout.bind(Oe(Oe(t))),t.loop=r.a.createRef(),t.bottomBar=r.a.createRef(),t.loginModal=r.a.createRef(),t.state={},t}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(e,r.a.Component),n=e,(o=[{key:"componentDidMount",value:function(){var t=localStorage.getItem("token");t&&y.a.get("/api/game",{headers:{Authorization:"Bearer "+t}}).then(function(t){if(t.data.game&&t.data.game.inventory){var e=[];e.push(new Promise(function(e,n){H.dispatch($(t.data.game.areas))})),e.push(new Promise(function(e,n){H.dispatch(X(t.data.game.dialogue))})),e.push(new Promise(function(e,n){H.dispatch(J(t.data.game.inventory))})),e.push(new Promise(function(e,n){H.dispatch(et(t.data.game.progress))})),Promise.all(e)}})}},{key:"openLoginModal",value:function(){this.loginModal.current.handleOpenModal()}},{key:"handleLogin",value:function(){this.loop.current.handleLogin(),this.bottomBar.current.handleLogin()}},{key:"handleLogout",value:function(){this.loop.current.handleLogout()}},{key:"render",value:function(){return r.a.createElement("div",{className:"full"},r.a.createElement("div",{id:"loop-container"},r.a.createElement(ae,{ref:this.loop})),r.a.createElement("div",{id:"bottom-bar-container"},r.a.createElement(fe,{ref:this.bottomBar,openLoginModal:this.openLoginModal,handleLogout:this.handleLogout})),r.a.createElement(ve,{ref:this.loginModal,handleLogin:this.handleLogin}))}}])&&Ee(n.prototype,o),a&&Ee(n,a),e}(),Pe=function(){return r.a.createElement(u.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,{path:"/",component:_e}),r.a.createElement(p.a,{path:"*",render:function(){return r.a.createElement(d.a,{to:"/"})}})))},xe=function(){return r.a.createElement(Pe,null)};n(100);c.a.setAppElement("#app"),i.a.render(r.a.createElement(s.a,{store:H},r.a.createElement(xe,null)),document.getElementById("app"))}]);